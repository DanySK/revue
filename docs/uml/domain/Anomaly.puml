@startuml

interface Anomaly {
  + getAnomalyId(): Int
  + getDeviceId(): DeviceId
  + getTimestamp(): Date
}
note right of Anomaly: Domain Event

interface Exceeding {
  + getValue(): Float,
  + getMeasure(): Measure
}

interface Intrusion {
  + getIntrusionObject(): ObjectClass
}

Exceeding *-- Anomaly
Intrusion *-- Anomaly

!startsub AnomalyRoot
interface AnomalyService {
  + addAnomaly(anomaly: Anomaly): void
  + removeAnomaly(anomalyId: String): void
  + notifyAlarmService(anomaly: Anomaly): void
}
!endsub AnomalyRoot
note left of AnomalyService: Service

interface AnomalyFactory {
  + createIntrusion(): Anomaly
  + createExceeding(): Anomaly
}
note right: Factory
AnomalyFactory --> Anomaly : creates
AnomalyFactory <-- AnomalyService : uses

interface AnomalyRepository {
  + getAnomalies(): Set<Anomaly>
  + insertAnomaly(anomaly: Anomaly): void
  + deleteAnomaly(anomalyId: Int): void
}
note left of AnomalyRepository: Repository
AnomalyRepository o-up- Anomaly
AnomalyService --> AnomalyRepository : uses

@enduml
